<header class="app-header">
  <div class="header-left">
    <div class="brand">
      <img src="assets/logo_name_primary.png" style="height: 50px;" alt="Synkventory Logo" class="brand-logo">
    </div>
    <p-button
      [icon]="viewModeIcon()"
      [text]="true"
      [rounded]="true"
      (onClick)="cycleViewMode()"
      [pTooltip]="viewModeTooltip()"
      tooltipPosition="bottom"
      styleClass="header-menu-btn">
    </p-button>
  </div>

  <!-- Mega Menu Navigation (shown when viewMode === 'mega-menu') -->
  @if (viewMode() === 'mega-menu') {
    <nav class="mega-menu">
      @for (section of navSections; track section.title) {
        @for (item of section.items; track item.route) {
          <div class="mega-menu-item" [class.has-children]="item.children && item.children.length > 0">
            @if (item.children && item.children.length > 0) {
              <button class="mega-menu-btn">
                <i [class]="item.icon"></i>
                <span>{{ item.label }}</span>
                <i class="pi pi-chevron-down dropdown-arrow"></i>
              </button>
              <div class="mega-dropdown">
                @for (child of item.children; track child.route) {
                  <a [routerLink]="child.route" class="mega-dropdown-item" routerLinkActive="active">
                    <i [class]="child.icon"></i>
                    <span>{{ child.label }}</span>
                  </a>
                }
              </div>
            } @else {
              <a [routerLink]="item.route" class="mega-menu-btn" routerLinkActive="active">
                <i [class]="item.icon"></i>
                <span>{{ item.label }}</span>
              </a>
            }
          </div>
        }
      }
    </nav>
  }

  <div class="header-right">
    <p-button
      icon="pi pi-bell"
      [text]="true"
      [rounded]="true"
      [badge]="'3'"
      badgeSeverity="danger"
      styleClass="header-icon-btn">
    </p-button>
    <p-button
      icon="pi pi-cog"
      [text]="true"
      [rounded]="true"
      styleClass="header-icon-btn">
    </p-button>
    <div class="user-section">
      <p-avatar
        icon="pi pi-user"
        shape="circle"
        styleClass="user-avatar"
        (click)="userMenu.toggle($event)">
      </p-avatar>
      <span class="user-name" (click)="userMenu.toggle($event)">{{ userName() }}</span>
      <p-menu #userMenu [model]="userMenuItems" [popup]="true" appendTo="body"></p-menu>
    </div>
  </div>
</header>
